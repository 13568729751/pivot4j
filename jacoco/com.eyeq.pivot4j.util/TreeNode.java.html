<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TreeNode.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Pivot4J</a> &gt; <a href="index.html" class="el_package">com.eyeq.pivot4j.util</a> &gt; <span class="el_source">TreeNode.java</span></div><h1>TreeNode.java</h1><pre class="source lang-java linenums">/*
 * ====================================================================
 * This software is subject to the terms of the Common Public License
 * Agreement, available at the following URL:
 *   http://www.opensource.org/licenses/cpl.html .
 * You must accept the terms of that agreement to use this software.
 * ====================================================================
 */
package com.eyeq.pivot4j.util;

import java.util.ArrayList;
import java.util.List;

/**
 * Tree Node for the for a general tree of Objects
 */
public class TreeNode&lt;T&gt; {

<span class="fc" id="L19">	private TreeNode&lt;T&gt; parent = null;</span>

<span class="fc" id="L21">	private List&lt;TreeNode&lt;T&gt;&gt; children = null;</span>

	private T reference;

	/**
	 * cTtor
	 * 
	 * @param obj
	 *            referenced object
	 */
<span class="fc" id="L31">	public TreeNode(T obj) {</span>
<span class="fc" id="L32">		this.parent = null;</span>
<span class="fc" id="L33">		this.reference = obj;</span>
<span class="fc" id="L34">		this.children = new ArrayList&lt;TreeNode&lt;T&gt;&gt;();</span>
<span class="fc" id="L35">	}</span>

	/**
	 * remove node from tree
	 */
	public void remove() {
<span class="pc bpc" id="L41" title="1 of 2 branches missed.">		if (parent != null) {</span>
<span class="fc" id="L42">			parent.removeChild(this);</span>
		}
<span class="fc" id="L44">	}</span>

	/**
	 * remove child node
	 * 
	 * @param child
	 */
	public void removeChild(TreeNode&lt;T&gt; child) {
<span class="pc bpc" id="L52" title="1 of 2 branches missed.">		if (children.contains(child)) {</span>
<span class="fc" id="L53">			children.remove(child);</span>
		}
<span class="fc" id="L55">	}</span>

	/**
	 * add child node
	 * 
	 * @param child
	 *            node to be added
	 */
	public void addChild(TreeNode&lt;T&gt; child) {
<span class="fc" id="L64">		child.parent = this;</span>
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">		if (!children.contains(child)) {</span>
<span class="fc" id="L66">			children.add(child);</span>
		}
<span class="fc" id="L68">	}</span>

	/**
	 * deep copy (clone)
	 * 
	 * @return copy of TreeNode
	 */
	public TreeNode&lt;T&gt; deepCopy() {
<span class="nc" id="L76">		TreeNode&lt;T&gt; newNode = new TreeNode&lt;T&gt;(reference);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">		for (TreeNode&lt;T&gt; child : children) {</span>
<span class="nc" id="L78">			newNode.addChild(child.deepCopy());</span>
<span class="nc" id="L79">		}</span>
<span class="nc" id="L80">		return newNode;</span>
	}

	/**
	 * deep copy (clone) and prune
	 * 
	 * @param depth
	 *            - number of child levels to be copied
	 * @return copy of TreeNode
	 */
	public TreeNode&lt;T&gt; deepCopyPrune(int depth) {
<span class="nc bnc" id="L91" title="All 2 branches missed.">		if (depth &lt; 0) {</span>
<span class="nc" id="L92">			throw new IllegalArgumentException(&quot;Depth is negative&quot;);</span>
		}

<span class="nc" id="L95">		TreeNode&lt;T&gt; newNode = new TreeNode&lt;T&gt;(reference);</span>
<span class="nc bnc" id="L96" title="All 2 branches missed.">		if (depth == 0) {</span>
<span class="nc" id="L97">			return newNode;</span>
		}

<span class="nc bnc" id="L100" title="All 2 branches missed.">		for (TreeNode&lt;T&gt; child : children) {</span>
<span class="nc" id="L101">			newNode.addChild(child.deepCopyPrune(depth - 1));</span>
<span class="nc" id="L102">		}</span>
<span class="nc" id="L103">		return newNode;</span>
	}

	/**
	 * @return level = distance from root
	 */
	public int getLevel() {
<span class="fc" id="L110">		int level = 0;</span>
<span class="fc" id="L111">		TreeNode&lt;T&gt; p = parent;</span>
<span class="fc bfc" id="L112" title="All 2 branches covered.">		while (p != null) {</span>
<span class="fc" id="L113">			++level;</span>
<span class="fc" id="L114">			p = p.parent;</span>
		}
<span class="fc" id="L116">		return level;</span>
	}

	/**
	 * walk through subtree of this node
	 * 
	 * @param callbackHandler
	 *            function called on iteration
	 */
	public int walkTree(TreeNodeCallback&lt;T&gt; callbackHandler) {
<span class="fc" id="L126">		int code = 0;</span>
<span class="fc" id="L127">		code = callbackHandler.handleTreeNode(this);</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">		if (code != TreeNodeCallback.CONTINUE) {</span>
<span class="fc" id="L129">			return code;</span>
		}

<span class="fc bfc" id="L132" title="All 2 branches covered.">		for (TreeNode&lt;T&gt; child : children) {</span>
<span class="fc" id="L133">			code = child.walkTree(callbackHandler);</span>
<span class="fc bfc" id="L134" title="All 2 branches covered.">			if (code &gt;= TreeNodeCallback.CONTINUE_PARENT) {</span>
<span class="fc" id="L135">				return code;</span>
			}
<span class="fc" id="L137">		}</span>
<span class="fc" id="L138">		return code;</span>
	}

	/**
	 * walk through children subtrees of this node
	 * 
	 * @param callbackHandler
	 *            function called on iteration
	 */
	public int walkChildren(TreeNodeCallback &lt;T&gt;callbackHandler) {
<span class="fc" id="L148">		int code = 0;</span>
<span class="fc bfc" id="L149" title="All 2 branches covered.">		for (TreeNode&lt;T&gt; child : children) {</span>
<span class="fc" id="L150">			code = callbackHandler.handleTreeNode(child);</span>
<span class="fc bfc" id="L151" title="All 2 branches covered.">			if (code &gt;= TreeNodeCallback.CONTINUE_PARENT) {</span>
<span class="fc" id="L152">				return code;</span>
			}
<span class="fc bfc" id="L154" title="All 2 branches covered.">			if (code == TreeNodeCallback.CONTINUE) {</span>
<span class="fc" id="L155">				code = child.walkChildren(callbackHandler);</span>
<span class="fc bfc" id="L156" title="All 2 branches covered.">				if (code &gt; TreeNodeCallback.CONTINUE_PARENT) {</span>
<span class="fc" id="L157">					return code;</span>
				}
			}
<span class="fc" id="L160">		}</span>
<span class="fc" id="L161">		return code;</span>
	}

	/**
	 * @return List of children
	 */
	public List&lt;TreeNode&lt;T&gt;&gt; getChildren() {
<span class="fc" id="L168">		return children;</span>
	}

	/**
	 * @return parent node
	 */
	public TreeNode&lt;T&gt; getParent() {
<span class="fc" id="L175">		return parent;</span>
	}

	/**
	 * @return reference object
	 */
	public T getReference() {
<span class="fc" id="L182">		return reference;</span>
	}

	/**
	 * set reference object
	 * 
	 * @param object
	 *            reference
	 */
	public void setReference(T object) {
<span class="nc" id="L192">		reference = object;</span>
<span class="nc" id="L193">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.5.10.201208310627</span></div></body></html>