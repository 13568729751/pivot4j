<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Literal.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Pivot4J</a> &gt; <a href="index.html" class="el_package">com.eyeq.pivot4j.mdx</a> &gt; <span class="el_source">Literal.java</span></div><h1>Literal.java</h1><pre class="source lang-java linenums">/*
 * ====================================================================
 * This software is subject to the terms of the Common Public License
 * Agreement, available at the following URL:
 *   http://www.opensource.org/licenses/cpl.html .
 * You must accept the terms of that agreement to use this software.
 * ====================================================================
 */
package com.eyeq.pivot4j.mdx;

/**
 * MDX parser Literal Expressions
 */
public class Literal implements Exp {

	public int type;
	private Object o;

<span class="nc" id="L19">	public static final Literal emptyString = new Literal(&quot;&quot;, false);</span>
<span class="nc" id="L20">	public static final Literal zero = new Literal(new Integer(0));</span>
<span class="nc" id="L21">	public static final Literal one = new Literal(new Integer(1));</span>
<span class="nc" id="L22">	public static final Literal doubleZero = new Literal(new Double(0.0));</span>
<span class="nc" id="L23">	public static final Literal doubleOne = new Literal(new Double(1.0));</span>

	public static final int TYPE_SYMBOL = 1;
	public static final int TYPE_STRING = 2;
	public static final int TYPE_NUMERIC = 3;

<span class="nc" id="L29">	private Literal(String s, boolean isSymbol) {</span>
<span class="nc" id="L30">		this.o = s;</span>
<span class="nc bnc" id="L31" title="All 2 branches missed.">		this.type = isSymbol ? TYPE_SYMBOL : TYPE_STRING;</span>
<span class="nc" id="L32">	}</span>

	public static Literal createString(String s) {
<span class="nc bnc" id="L35" title="All 2 branches missed.">		if (s.equals(&quot;&quot;)) {</span>
<span class="nc" id="L36">			return emptyString;</span>
		} else {
<span class="nc" id="L38">			return new Literal(s, false);</span>
		}
	}

	public static Literal createSymbol(String s) {
<span class="nc" id="L43">		return new Literal(s, true);</span>
	}

<span class="nc" id="L46">	private Literal(Double d) {</span>
<span class="nc" id="L47">		this.o = d;</span>
<span class="nc" id="L48">		this.type = TYPE_NUMERIC;</span>
<span class="nc" id="L49">	}</span>

	public static Literal create(Double d) {
<span class="nc bnc" id="L52" title="All 2 branches missed.">		if (d.doubleValue() == 0.0) {</span>
<span class="nc" id="L53">			return doubleZero;</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">		} else if (d.doubleValue() == 1.0) {</span>
<span class="nc" id="L55">			return doubleOne;</span>
		} else {
<span class="nc" id="L57">			return new Literal(d);</span>
		}
	}

<span class="nc" id="L61">	private Literal(Integer i) {</span>
<span class="nc" id="L62">		this.o = i;</span>
<span class="nc" id="L63">		this.type = TYPE_NUMERIC;</span>
<span class="nc" id="L64">	}</span>

	public static Literal create(Integer i) {
<span class="nc bnc" id="L67" title="All 2 branches missed.">		if (i.intValue() == 0) {</span>
<span class="nc" id="L68">			return zero;</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">		} else if (i.intValue() == 1) {</span>
<span class="nc" id="L70">			return one;</span>
		} else {
<span class="nc" id="L72">			return new Literal(i);</span>
		}
	}

	/**
	 * format to MDX
	 */
	public String toMdx() {
<span class="nc" id="L80">		return o.toString();</span>
	}

	/**
	 * Literal is immutable
	 * 
	 * @see java.lang.Object#clone()
	 */
	public Literal clone() {
<span class="nc" id="L89">		return this;</span>
	}

	/**
   */
	public String stringValue() {
<span class="nc bnc" id="L95" title="All 2 branches missed.">		if (type == TYPE_STRING) {</span>
			// must remove enclosing double quotes
<span class="nc" id="L97">			String str = (String) o;</span>
<span class="nc" id="L98">			return str.substring(1, str.length() - 1);</span>
		} else
<span class="nc" id="L100">			return o.toString();</span>
	}

	/**
	 * @return
	 */
	public Object getValueObject() {
<span class="nc" id="L107">		return o;</span>
	}

	/**
	 * @see com.tonbeller.jpivot.olap.mdxparse.Exp#accept
	 */
	public void accept(ExpVisitor visitor) {
<span class="nc" id="L114">		visitor.visitLiteral(this);</span>
<span class="nc" id="L115">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.5.10.201208310627</span></div></body></html>